
<form [formGroup]="form!" class="p-5">
  <div class="row">
    <div class="col-md-4 col-12">
      <mat-form-field >
        <mat-label>Departamento</mat-label>
        <input 
          type="text"
          placeholder="Seleccione un departamento"
          aria-label="departamento"
          matInput
          formControlName="departmentId"
          [matAutocomplete]="autoDepartments"
        >
        <mat-autocomplete #autoDepartments="matAutocomplete" [displayWith]="displayFn">
          <mat-option *ngFor="let department of departments" [value]="department">
            {{department.name}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </div>

    
    <div class="col-md-2 col-12">
      <mat-form-field >
        <mat-label>Semestre</mat-label>
        <input 
          type="text"
          placeholder="Seleccione un semestre"
          aria-label="Semestre"
          matInput
          formControlName="semester"
          [matAutocomplete]="autoSemester"
        >
        <mat-autocomplete #autoSemester="matAutocomplete" [displayWith]="displayFn">
          <mat-option *ngFor="let semester of semesters" [value]="semester">
            {{semester.name}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </div>

    
    <div class="col-md-4 col-12">
      <mat-form-field >
        <mat-label>Asignatura</mat-label>
        <input 
          type="text"
          placeholder="Seleccione una asignatura"
          aria-label="Asignatura"
          matInput
          formControlName="subjectId"
          [matAutocomplete]="autoSubjects"
        >
        <mat-autocomplete #autoSubjects="matAutocomplete" [displayWith]="displayFn">
          <mat-option *ngFor="let subject of subjects" [value]="subject">
            ({{subject.code}}) {{subject.name}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </div>


    <div class="col-md-2 col-12">
      <mat-form-field >
        <mat-label>Sección</mat-label>
        <input 
          type="text"
          placeholder="Seleccione una sección"
          aria-label="Sección"
          matInput
          formControlName="sectionId"
          [matAutocomplete]="autoSections"
        >
        <mat-autocomplete #autoSections="matAutocomplete" [displayWith]="displayFn">
          <mat-option *ngFor="let section of sections" [value]="section">
            {{section.name}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </div>

  </div>

</form>

<div class="container">
  <mat-card>
    <mat-card-header>
    </mat-card-header>
    <mat-card-content>
      <sigeit-table
        emptyMessage="No hay horarios para mostrar"
      ></sigeit-table>
    </mat-card-content>
  </mat-card>
  <button
    mat-fab
    matTooltip="Agregar horario"
    color="primary"
    aria-label="Agregar horario"
    class="btn-fixed"
    (click)="changeShowForm(true)"
  >
    <mat-icon>add</mat-icon>
  </button>
</div>


<ng-container *ngIf="showForm">
  <app-form
    [sectionId]="sectionId"
    [scheduleId]="scheduleId"
    [periodId]="periodId"  
    (closed)="loadSchedules(); changeShowForm(false)"
    (cancel)="changeShowForm(false)"
  >
  </app-form>
</ng-container>